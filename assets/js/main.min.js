"use strict";function get_siblings(t){var s=[];if(t.parentNode){let e=t.parentNode.firstChild;for(;e;)1===e.nodeType&&e!==t&&s.push(e),e=e.nextSibling}return s}function slideDown(e){e.style.maxHeight=e.scrollHeight+"px"}function slideToggle(e){0===e.offsetHeight?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=0}function accordion(){document.querySelectorAll(".js-accordion").forEach(e=>{const t=e.querySelectorAll("button"),s=()=>{for(var e of t)e.classList.remove("active"),e.nextElementSibling.style.maxHeight=0};t.forEach(e=>{e.addEventListener("click",function(){this.classList.contains("active")?s():(s(),this.classList.add("active"),slideToggle(this.nextElementSibling))})})})}function setHeaderScrollClass(){const e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>=e.offsetHeight?e.classList.add("scroll"):e.classList.remove("scroll")})}function setTelMask(){[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let n;function t(e){e.keyCode&&(n=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___-__-__",s=0,i=t.replace(/\D/g,""),a=this.value.replace(/\D/g,""),l=t.replace(/[_\d]/g,function(e){return s<a.length?a.charAt(s++)||i.charAt(s):e});-1!=(s=l.indexOf("_"))&&(s<5&&(s=3),l=l.slice(0,s));var r=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(r=new RegExp("^"+r+"$")).test(this.value)||this.value.length<5||47<n&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}function sendForm(){document.querySelectorAll("form[name]").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault();const t=this;t.classList.add("loader");let s=new FormData(t);var e=t.name,i=t.querySelector("input[type=file]");s.append("action","send_mail"),e&&(s.append("form_name",e),i&&Array.from(i.files).forEach((e,t)=>{s.append(t.toString(),e)}),fetch(adem_ajax.url,{method:"POST",body:s}).then(e=>e.text()).then(e=>{t.classList.remove("loader"),Fancybox.close(!0),t.reset(),setTimeout(function(){Fancybox.show([{src:"#success",type:"inline"}])},100)}).catch(e=>{console.error("Error:",e)}))})})}function setFileName(){var e=document.querySelectorAll("input[type=file]");e&&e.forEach(function(e){e.addEventListener("change",function(e){e.target.nextElementSibling.textContent=e.target.files[0].name})})}function tabs(){var e=document.querySelectorAll(".js-tabs");e&&e.forEach(function(e){var s;(s=e).addEventListener("click",function(e){var t=e.target.closest("li");t.classList.contains("active")&&t.parentNode.classList.toggle("open"),t.classList.contains("active")||e.target===s||(e=t,t=document.querySelector("#"+e.getAttribute("data-tab")),e.classList.add("active"),get_siblings(e).forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),get_siblings(t).forEach(function(e){e.classList.remove("active")}),e.parentNode.classList.remove("open"))})})}function showMorePosts(){var e=document.querySelector(".js-show-more");e&&e.addEventListener("click",function(e){e.stopImmediatePropagation();const t=document.querySelector(".js-show-more-container");this.classList.add("btn-show-more--loading");fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"load_more",query:posts,page:current_page})}).then(e=>e.text()).then(e=>{this.classList.remove("btn-show-more--loading"),t.insertAdjacentHTML("beforeend",e),++current_page===max_pages&&this.classList.add("hidden")}).catch(e=>{console.error("Error:",e)})})}document.addEventListener("DOMContentLoaded",function(){accordion(),setHeaderScrollClass(),setFileName(),sendForm(),setTelMask(),tabs(),showMorePosts()});try{Fancybox.bind("[data-fancybox]",{animated:!1}),Fancybox.bind('[data-src="#order-calc"]',{defaultDisplay:"block",dragToClose:!1})}catch(e){console.log(e)}const welcomeCarousel=document.querySelector(".welcome__slider");if(welcomeCarousel){let e=new Swiper(welcomeCarousel,{slidesPerView:1,spaceBetween:0,speed:1400,allowTouchMove:!1,autoplay:{delay:4e3},navigation:{nextEl:".welcome__slider-next",prevEl:".welcome__slider-prev"},pagination:{el:".welcome__slider-pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"}})}const aboutCarousel=document.querySelector(".about__slider");if(aboutCarousel){let e=new Swiper(aboutCarousel,{slidesPerView:"auto",spaceBetween:20,autoplay:{delay:4e3},pagination:{el:".about__slider-pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},breakpoints:{992:{slidesPerView:"auto",spaceBetween:0,speed:1400},578:{slidesPerView:2}}})}const fullsizeCarousel=document.querySelector(".fullsize-slider");if(fullsizeCarousel){const ja=fullsizeCarousel.querySelector(".fullsize-slider__text"),ka=fullsizeCarousel.querySelector(".fullsize-slider__icon"),la=e=>{ja.textContent=e.dataset.caption,e.dataset.icon?(ka.classList.remove("hidden"),ka.setAttribute("src",e.dataset.icon)):ka.classList.add("hidden")};let e=new Swiper(fullsizeCarousel,{slidesPerView:1,spaceBetween:0,speed:1400,navigation:{nextEl:".fullsize-slider__next",prevEl:".fullsize-slider__prev"},pagination:{el:".fullsize-slider__pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},on:{afterInit:function(){la(this.slides[this.activeIndex])},slideChange:function(){la(this.slides[this.activeIndex])}}})}const advantagesCarousel=document.querySelector(".advantages__slider");if(advantagesCarousel){let e=new Swiper(advantagesCarousel,{slidesPerView:"auto",spaceBetween:20,autoplay:{delay:4e3},pagination:{el:".advantages__slider-pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},breakpoints:{992:{slidesPerView:"auto",spaceBetween:0,speed:1400},578:{slidesPerView:2}}})}const gallerySliderHolders=document.querySelectorAll(".gallery-slider"),singleServicesCarousel=(gallerySliderHolders&&gallerySliderHolders.forEach(e=>{var t=e.querySelector(".gallery-slider__big-slider"),e=e.querySelector(".gallery-slider__thumb-slider"),e=new Swiper(e,{spaceBetween:10,slidesPerView:2,watchSlidesProgress:!0,breakpoints:{1440:{spaceBetween:100,slidesPerView:4},769:{slidesPerView:4},577:{slidesPerView:3}}});new Swiper(t,{slidesPerView:1,spaceBetween:10,thumbs:{swiper:e}})}),document.querySelector(".single-services--slider"));if(singleServicesCarousel){let e=new Swiper(singleServicesCarousel,{slidesPerView:1,spaceBetween:0,speed:1400,allowTouchMove:!1,autoplay:{delay:6e3},navigation:{nextEl:".single-services__next",prevEl:".single-services__prev"},pagination:{el:".single-services__pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},on:{afterInit:function(){this.slides.length===this.params.slidesPerView&&(this.el.querySelector(".single-services__panel").style.display="none")}}})}const villasCarousel=document.querySelector(".villas-slider__slider");if(villasCarousel){let e=new Swiper(villasCarousel,{slidesPerView:"auto",autoHeight:!0,spaceBetween:30,speed:1400,autoplay:{delay:4e3},navigation:{nextEl:villasCarousel.parentNode.parentNode.querySelector(".villas-slider__next"),prevEl:villasCarousel.parentNode.parentNode.querySelector(".villas-slider__prev")},pagination:{el:".villas-slider__pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},breakpoints:{1440:{spaceBetween:130},992:{speed:1400}}})}const servicesCarousel=document.querySelector(".services-slider__container");if(servicesCarousel){let e=new Swiper(servicesCarousel,{slidesPerView:"auto",spaceBetween:20,navigation:{nextEl:servicesCarousel.parentNode.querySelector(".services-slider__next"),prevEl:servicesCarousel.parentNode.querySelector(".services-slider__prev")},pagination:{el:".services-slider__pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},breakpoints:{1440:{slidesPerView:3,spaceBetween:120},992:{slidesPerView:3},769:{slidesPerView:2,spaceBetween:60}}})}const specialOffersCarousel=document.querySelector(".special-offers-slider__container");if(specialOffersCarousel){let e=new Swiper(specialOffersCarousel,{slidesPerView:"auto",spaceBetween:10,autoHeight:!0,pagination:{el:".special-offers-slider__pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},breakpoints:{1440:{spaceBetween:120,autoHeight:!1},769:{spaceBetween:60,autoHeight:!1},577:{spaceBetween:30,autoHeight:!1}}})}const imageTextCarousel=document.querySelector(".image-text-slider__container");if(imageTextCarousel){let e=new Swiper(imageTextCarousel,{slidesPerView:"auto",spaceBetween:20,autoHeight:!0,navigation:{nextEl:imageTextCarousel.querySelector(".image-text-slider__next"),prevEl:imageTextCarousel.querySelector(".image-text-slider__prev")},breakpoints:{992:{slidesPerView:3,spaceBetween:60,autoHeight:!1},769:{slidesPerView:2,spaceBetween:60,autoHeight:!1},577:{slidesPerView:"auto",spaceBetween:30,autoHeight:!1}}})}const imageCarousel=document.querySelector(".image-slider__container");if(imageCarousel){let e=new Swiper(imageCarousel,{slidesPerView:"auto",initialSlide:2,centeredSlides:!0,effect:"creative",creativeEffect:{prev:{translate:[-325,0,-150]},next:{translate:[325,0,-150]},limitProgress:5},pagination:{el:".image-slider__pagination",bulletClass:"pagination__bullet",bulletActiveClass:"active"},breakpoints:{992:{creativeEffect:{prev:{translate:[-425,0,-150]},next:{translate:[425,0,-150]}},limitProgress:5}}})}document.addEventListener("DOMContentLoaded",function(e){const t=document.querySelector(".header");if(t){const s=t.querySelector(".header__burger"),i=t.querySelector(".header__content");s.addEventListener("click",function(){this.classList.contains("active")?(t.classList.remove("active"),s.classList.remove("active"),i.style.maxHeight=0,document.body.style.overflow="visible"):(t.classList.add("active"),s.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px",document.body.style.overflow="hidden")})}});const sidebar=document.querySelector(".sidebar"),serviceModalBtns=(sidebar&&(sidebar.addEventListener("mouseover",function(){this.classList.add("active")}),sidebar.addEventListener("mouseout",function(){this.classList.remove("active")})),document.querySelectorAll(".js-service-button"));if(serviceModalBtns){const Ga=document.querySelector(".js-service-input");serviceModalBtns.forEach(e=>{e.addEventListener("click",()=>{Ga.value=e.dataset.service})})}const servicesMoreBtns=document.querySelectorAll(".services__item-more"),villasCatBtns=(servicesMoreBtns&&window.innerWidth<=768&&servicesMoreBtns.forEach(s=>{s.addEventListener("click",function(){var e=s.parentNode.querySelector(".services__item-dropdown"),t=this.querySelector(".services__item-more-text");(this.classList.contains("active")?(this.classList.remove("active"),t.innerHTML="Развернуть",e.classList.remove("active"),slideToggle):(this.classList.add("active"),t.innerHTML="Свернуть",e.classList.add("active"),slideDown))(e)})}),document.querySelectorAll(".villas__cat"));if(villasCatBtns){const La=document.querySelector(".villas__list"),Ma=async()=>fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"max_pages",query:posts})});villasCatBtns.forEach(e=>{e.addEventListener("click",function(){var e=La.querySelectorAll(".villas__item");const s=document.querySelector(".js-show-more");e.forEach(e=>e.classList.add("loader")),s.classList.add("hidden");e=JSON.parse(posts);e["villa-category"]=this.dataset.slug,e.term=this.dataset.slug,current_page=1,posts=JSON.stringify(e),fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"load_cat",query:posts})}).then(e=>e.text()).then(e=>{for(var t of villasCatBtns)t.classList.remove("active");this.classList.add("active"),La.innerHTML=e,Ma().then(e=>e.text()).then(e=>{(max_pages=Number(e))===current_page?s.classList.add("hidden"):s.classList.remove("hidden")}).catch(e=>{console.error("Error:",e)})}).catch(e=>{console.error("Error:",e)})})})}